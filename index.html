<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="ê°“ë¬¼ì£¼ - ë¶€ë™ì‚° ê°œë°œ ë³´ë“œê²Œì„ ë””ì§€í„¸ í”„ë¡œí† íƒ€ì…">
  <title>ê°“ë¬¼ì£¼ - ë¶€ë™ì‚° ê°œë°œ ë³´ë“œê²Œì„</title>
  
  <!-- í°íŠ¸ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- ìŠ¤íƒ€ì¼ì‹œíŠ¸ -->
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/cards.css">
  <link rel="stylesheet" href="styles/mobile.css">
  
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ—ï¸</text></svg>">

  <!-- Three.js -->
  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
      }
    }
  </script>
</head>
<body>
  <!-- í”„ë¦¬ë¡œë” -->
  <div id="preloader">
    <div class="preloader-content">
      <div class="preloader-logo">ğŸ—ï¸</div>
      <h1 class="preloader-title">ê°“ë¬¼ì£¼</h1>
      <div class="preloader-spinner">
        <div class="spinner-ring"></div>
        <div class="spinner-ring"></div>
        <div class="spinner-ring"></div>
      </div>
      <div class="preloader-text">ë¡œë”© ì¤‘...</div>
      <div class="preloader-progress">
        <div class="progress-bar-inner" id="preloader-progress-bar"></div>
      </div>
    </div>
  </div>

  <!-- ì•Œë¦¼ ì»¨í…Œì´ë„ˆ -->
  <div id="notifications"></div>
  
  <!-- ===== ë©”ì¸ ë©”ë‰´ ===== -->
  <section id="main-menu">
    <div class="game-logo">ğŸ—ï¸</div>
    <h1 class="game-title">ê°“ë¬¼ì£¼</h1>
    <p class="game-subtitle">Real Estate Mogul - ë¶€ë™ì‚° ê°œë°œ ë³´ë“œê²Œì„</p>
    
    <div class="menu-buttons">
      <button id="btn-new-game" class="menu-btn primary">
        ğŸ® ìƒˆ ê²Œì„ ì‹œì‘
      </button>
      <button id="btn-load-game" class="menu-btn secondary">
        ğŸ’¾ ì´ì–´í•˜ê¸°
      </button>
      <button id="btn-rules" class="menu-btn secondary">
        ğŸ“œ ê²Œì„ ê·œì¹™
      </button>
    </div>
  </section>
  
  <!-- ===== í”Œë ˆì´ì–´ ì„¤ì • ===== -->
  <section id="player-setup" class="hidden">
    <div class="setup-header">
      <h2>ğŸ‘¥ í”Œë ˆì´ì–´ ì„¤ì •</h2>
      <p>ì°¸ì—¬í•  í”Œë ˆì´ì–´ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (1~4ëª…)</p>
    </div>
    
    <div class="player-inputs">
      <div class="player-input-row">
        <div class="player-number">1</div>
        <input type="text" class="player-name-input" placeholder="í”Œë ˆì´ì–´ 1 ì´ë¦„" value="í”Œë ˆì´ì–´ 1">
      </div>
      <div class="player-input-row">
        <div class="player-number">2</div>
        <input type="text" class="player-name-input" placeholder="í”Œë ˆì´ì–´ 2 ì´ë¦„ (ì„ íƒ)">
      </div>
      <div class="player-input-row">
        <div class="player-number">3</div>
        <input type="text" class="player-name-input" placeholder="í”Œë ˆì´ì–´ 3 ì´ë¦„ (ì„ íƒ)">
      </div>
      <div class="player-input-row">
        <div class="player-number">4</div>
        <input type="text" class="player-name-input" placeholder="í”Œë ˆì´ì–´ 4 ì´ë¦„ (ì„ íƒ)">
      </div>
    </div>
    
    <div class="setup-options">
      <div class="option-row">
        <input type="checkbox" id="easy-start">
        <label for="easy-start">ğŸ¯ ì‰¬ìš´ ì‹œì‘ (ëª¨ë‘ ê°™ì€ ê¸ˆì•¡ìœ¼ë¡œ ì‹œì‘)</label>
      </div>
    </div>
    
    <div class="setup-actions">
      <button id="btn-back" class="menu-btn secondary">â† ë’¤ë¡œ</button>
      <button id="btn-start-game" class="menu-btn primary">ê²Œì„ ì‹œì‘ â†’</button>
    </div>
  </section>
  
  <!-- ===== ê²Œì„ ì»¨í…Œì´ë„ˆ ===== -->
  <main id="game-container" class="hidden">
    <!-- í”Œë ˆì´ì–´ íŒ¨ë„ (ì¢Œì¸¡) -->
    <aside id="player-panels">
      <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
    </aside>
    
    <!-- ê²Œì„ ë³´ë“œ (ìƒë‹¨) -->
    <header id="game-board">
      <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
    </header>

    <!-- ê²Œì„ ìœ í‹¸ë¦¬í‹° ë²„íŠ¼ -->
    <div id="game-utility-buttons">
      <button class="utility-btn" id="btn-budget-table">ğŸ’° ë‹¨ê°€í‘œ</button>
      <button class="utility-btn" id="btn-game-manual">ğŸ“– ê·œì¹™</button>
      <div class="menu-dropdown">
        <button class="utility-btn" id="btn-game-menu">â˜° ë©”ë‰´</button>
        <div class="menu-dropdown-content" id="game-menu-dropdown">
          <button id="btn-save-game">ğŸ’¾ ì €ì¥</button>
          <button id="btn-load-game-utility">ğŸ“‚ ì´ì–´í•˜ê¸°</button>
          <button id="btn-new-game-menu">ğŸ® ìƒˆ ê²Œì„</button>
        </div>
      </div>
    </div>

    <!-- ì•„ì´ì†Œë©”íŠ¸ë¦­ ê°œë°œ ì§€ë„ -->
    <section id="city-grid" class="hidden">
      <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
    </section>

    <!-- ì¹´ë“œ ê·¸ë¦¬ë“œ (ì¤‘ì•™) -->
    <section id="card-grid">
      <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
    </section>

    <!-- ê±´ë¬¼ ì„ íƒê¸° -->
    <section id="building-selector" class="hidden">
      <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
    </section>

    <!-- êµ¬ë§¤ ì˜µì…˜ íŒ¨ë„ -->
    <div id="purchase-options" class="hidden">
      <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
    </div>

    <!-- í”„ë¡œì íŠ¸ ë§µ (ì‹œê°í™”) -->
    <section id="project-map" class="hidden">
      <div class="map-header">
        <h3>ğŸ—ºï¸ í”„ë¡œì íŠ¸ í˜„í™©</h3>
      </div>
      <div class="map-container">
        <div class="map-grid" id="map-grid">
          <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
        </div>
      </div>
    </section>

    <!-- ì•¡ì…˜ ì˜ì—­ (í•˜ë‹¨) -->
    <footer id="action-area">
      <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
    </footer>
    
    <!-- ê²Œì„ ë¡œê·¸ (ìš°ì¸¡) -->
    <aside id="game-log">
      <div class="log-header">ğŸ“œ ê²Œì„ ë¡œê·¸</div>
      <div class="log-entries">
        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
      </div>
    </aside>
  </main>
  
  <!-- ëª¨ë°”ì¼ í”Œë ˆì´ì–´ íŒ¨ë„ í† ê¸€ -->
  <button class="mobile-player-toggle" id="mobile-player-toggle" aria-label="í”Œë ˆì´ì–´ íŒ¨ë„ ì—´ê¸°">ğŸ‘¥</button>
  <div class="mobile-panel-overlay" id="mobile-panel-overlay"></div>

  <!-- ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ -->
  <script type="module" src="js/main.js"></script>

  <!-- ëª¨ë°”ì¼ í† ê¸€ ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    (function() {
      const toggle = document.getElementById('mobile-player-toggle');
      const overlay = document.getElementById('mobile-panel-overlay');
      const panels = document.getElementById('player-panels');
      const gameContainer = document.getElementById('game-container');

      function openPanel() {
        panels.classList.add('mobile-open');
        overlay.classList.add('show');
        toggle.classList.add('active');
        toggle.textContent = 'âœ•';
      }

      function closePanel() {
        panels.classList.remove('mobile-open');
        overlay.classList.remove('show');
        toggle.classList.remove('active');
        toggle.textContent = 'ğŸ‘¥';
      }

      toggle.addEventListener('click', function() {
        if (panels.classList.contains('mobile-open')) {
          closePanel();
        } else {
          openPanel();
        }
      });

      overlay.addEventListener('click', closePanel);

      // game-containerì˜ hidden í´ë˜ìŠ¤ ë³€ê²½ ê°ì§€í•˜ì—¬ í† ê¸€ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
      var observer = new MutationObserver(function() {
        if (gameContainer.classList.contains('hidden')) {
          toggle.style.display = 'none';
          closePanel();
        }
      });
      observer.observe(gameContainer, { attributes: true, attributeFilter: ['class'] });
    })();
  </script>
</body>
</html>
